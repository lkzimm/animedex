<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Anime Art Studio — Gerador de Artes</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#7c3aed;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.03);
      --radius:14px;
      color-scheme: dark;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#071025 0%, #071826 100%);color:#e6eef8;min-height:100vh}
    header{display:flex;align-items:center;justify-content:space-between;padding:20px 28px}
    header h1{font-size:20px;margin:0}
    nav{display:flex;gap:12px}
    .btn{background:var(--glass);border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;cursor:pointer}
    .container{max-width:1100px;margin:18px auto;padding:18px}
    .grid{display:grid;grid-template-columns:1fr 380px;gap:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:var(--radius);box-shadow: 0 6px 24px rgba(2,6,23,0.6)}
    .tabs{display:flex;gap:8px;margin-bottom:12px}
    .tab{padding:10px 14px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.02);cursor:pointer}
    .tab.active{background:linear-gradient(90deg, rgba(124,58,237,0.16), rgba(124,58,237,0.08));border-color: rgba(124,58,237,0.22)}
    label{display:block;font-size:13px;color:var(--muted);margin-top:12px}
    input[type=text], select, textarea{width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit}
    textarea{min-height:110px;resize:vertical}
    .row{display:flex;gap:12px}
    .row .col{flex:1}
    .actions{display:flex;gap:10px;margin-top:12px;align-items:center}
    .accent{background:linear-gradient(90deg,var(--accent),#4f46e5);border:none;color:white}
    .gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:12px}
    .thumb{border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);background:#081225;min-height:140px;display:flex;align-items:center;justify-content:center}
    .muted{color:var(--muted);font-size:13px}
    .sidebar .card{position:sticky;top:24px}
    .upload-area{border:2px dashed rgba(255,255,255,0.03);padding:12px;border-radius:10px;text-align:center}
    input[type=file]{display:none}
    .small{font-size:13px}
    footer{max-width:1100px;margin:18px auto;color:var(--muted);font-size:13px;padding:0 18px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}.sidebar{order:2}}
  </style>
</head>
<body>
  <header>
    <h1>Anime Art Studio</h1>
    <nav>
      <button class="btn">Home</button>
      <button class="btn">Galeria</button>
      <button class="btn">Docs</button>
    </nav>
  </header>

  <main class="container">
    <div class="grid">
      <div>
        <div class="card">
          <div class="tabs" role="tablist">
            <button class="tab active" data-tab="generate">Gerar Arte</button>
            <button class="tab" data-tab="from-image">Gerar Prompt</button>
            <button class="tab" data-tab="styles">Estilos</button>
          </div>

          <section id="generate" class="tab-panel">
            <label>Prompt</label>
            <textarea id="prompt" placeholder="Ex: garota angelical com asas brancas, roupa escolar, luz suave, estilo anime - high detail"></textarea>

            <div class="row">
              <div class="col">
                <label>Estilo</label>
                <select id="style">
                  <option value="anime">Anime tradicional</option>
                  <option value="manga">Manga (linhas fortes)</option>
                  <option value="realistic">Realista</option>
                  <option value="chibi">Chibi</option>
                  <option value="digital">Pintura digital</option>
                </select>
              </div>
              <div class="col">
                <label>Tamanho</label>
                <select id="size">
                  <option>512x512</option>
                  <option>768x768</option>
                  <option>1024x1024</option>
                </select>
              </div>
            </div>

            <div class="actions">
              <button id="generateBtn" class="btn accent">Gerar imagem</button>
              <div id="genStatus" class="muted small">Pronto.</div>
            </div>

            <div id="resultArea" style="margin-top:14px">
              <div class="muted">Resultado:</div>
              <div id="gallery" class="gallery"></div>
            </div>
          </section>

          <section id="from-image" class="tab-panel" style="display:none">
            <label>Faça upload da imagem</label>
            <div class="upload-area card" id="dropzone">
              <p class="muted">Arraste & solte ou <label for="fileInput" class="btn" style="display:inline-block;cursor:pointer;margin-left:6px">Escolher arquivo</label></p>
              <input id="fileInput" type="file" accept="image/*">
              <small class="muted">O gerador vai retornar um prompt descritivo que você pode usar para criar imagens.</small>
            </div>
            <div style="margin-top:12px">
              <button id="analyzeBtn" class="btn">Gerar prompt da imagem</button>
              <div id="analyzeStatus" class="muted small">Aguardando upload.</div>
            </div>

            <div style="margin-top:12px">
              <label>Prompt sugerido</label>
              <textarea id="suggestedPrompt" readonly placeholder="O prompt gerado aparecerá aqui"></textarea>
            </div>
          </section>

          <section id="styles" class="tab-panel" style="display:none">
            <div class="muted">Escolha um estilo e veja exemplos rápidos.</div>
            <div style="margin-top:12px" class="gallery" id="styleExamples">
              <!-- placeholders -->
              <div class="thumb">Anime</div>
              <div class="thumb">Manga</div>
              <div class="thumb">Realista</div>
              <div class="thumb">Chibi</div>
            </div>
          </section>

        </div>

        <div style="margin-top:12px" class="card">
          <h3 style="margin:0 0 8px 0">Dicas rápidas</h3>
          <ul class="muted small">
            <li>Detalhe roupas, iluminação, ângulo e cores no prompt.</li>
            <li>Use vírgulas para separar características e "-" para negativa (ex: no text).</li>
            <li>Combine estilos: "anime + pintura digital" para um resultado híbrido.</li>
          </ul>
        </div>
      </div>

      <aside class="sidebar">
        <div class="card">
          <h3 style="margin-top:0">Preview & Downloads</h3>
          <div id="previewBox" style="margin-top:12px">
            <div class="thumb" id="preview">Nenhuma imagem</div>
          </div>
          <div style="margin-top:12px" class="row">
            <button id="downloadBtn" class="btn">Download</button>
            <button id="copyPromptBtn" class="btn">Copiar Prompt</button>
          </div>
        </div>

        <div style="margin-top:12px" class="card">
          <h4 style="margin:0">Configuração de API</h4>
          <p class="muted small">No momento o site roda em modo <b>demo</b>. Para conectar com uma API real, abra o arquivo e siga os comentários no código (adicionar sua chave e endpoint).</p>
        </div>
      </aside>
    </div>
  </main>

  <footer>
    Dica: salve como <code>index.html</code> e abra no navegador. Para integração real, substitua as funções mock por chamadas às APIs de geração (ver comentários no JS).
  </footer>

  <script>
    // --- UI TAB SWITCH ---
    document.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        btn.classList.add('active');
        const tab = btn.dataset.tab;
        document.querySelectorAll('.tab-panel').forEach(p=>p.style.display='none');
        document.getElementById(tab).style.display='block';
      })
    })

    // --- Simple mock generation so you can test locally ---
    const gallery = document.getElementById('gallery');
    const preview = document.getElementById('preview');
    const genStatus = document.getElementById('genStatus');

    function createPlaceholderImage(text, size="512"){
      const canvas = document.createElement('canvas');
      const s = parseInt(size.split('x')[0]) || 512;
      canvas.width = s; canvas.height = s;
      const ctx = canvas.getContext('2d');
      ctx.fillStyle = '#0b1220'; ctx.fillRect(0,0,s,s);
      ctx.fillStyle = '#9fb7ff'; ctx.font = Math.max(12, s/20)+'px sans-serif';
      ctx.textAlign = 'center'; ctx.textBaseline='middle';
      wrapText(ctx, text, s/2, s/2, s-40, Math.max(14, s/18));
      return canvas.toDataURL('image/png');
    }
    function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
      const words = text.split(' ');
      let line = '';
      let lines = [];
      for (let n = 0; n < words.length; n++) {
        const testLine = line + words[n] + ' ';
        const metrics = ctx.measureText(testLine);
        const testWidth = metrics.width;
        if (testWidth > maxWidth && n > 0) { lines.push(line); line = words[n] + ' '; }
        else { line = testLine; }
      }
      lines.push(line);
      const startY = y - (lines.length-1)*lineHeight/2;
      lines.forEach((l,i)=>ctx.fillText(l.trim(), x, startY + i*lineHeight));
    }

    document.getElementById('generateBtn').addEventListener('click', async ()=>{
      const prompt = document.getElementById('prompt').value.trim() || 'anime character';
      const style = document.getElementById('style').value;
      const size = document.getElementById('size').value;
      genStatus.textContent = 'Gerando...';

      // MOCK: create a placeholder image so you can test offline
      await new Promise(r=>setTimeout(r,800));
      const dataUrl = createPlaceholderImage(prompt + ' | ' + style, size);

      const img = document.createElement('img'); img.src = dataUrl; img.style.width='100%'; img.style.height='100%';
      const thumbs = document.createElement('div'); thumbs.className='thumb'; thumbs.appendChild(img);
      gallery.prepend(thumbs);
      preview.innerHTML=''; preview.appendChild(img.cloneNode());

      genStatus.textContent = 'Pronto — imagem adicionada à galeria.';

      // NOTE: Para usar uma API real, substitua o bloco acima por uma chamada fetch:
      /*
      genStatus.textContent = 'Enviando para API...';
      const response = await fetch('https://SEU_ENDPOINT_GENERATE',{
        method:'POST',headers:{'Authorization':'Bearer SUA_CHAVE','Content-Type':'application/json'},
        body: JSON.stringify({prompt, style, size})
      });
      const blob = await response.blob();
      const url = URL.createObjectURL(blob);
      // então use url como src do <img>
      */

    });

    // --- Upload & generate prompt from image (mock) ---
    const fileInput = document.getElementById('fileInput');
    const dropzone = document.getElementById('dropzone');
    let uploadedFile = null;
    dropzone.addEventListener('dragover',e=>{e.preventDefault(); dropzone.style.borderColor='rgba(124,58,237,0.6)'});
    dropzone.addEventListener('dragleave',e=>{e.preventDefault(); dropzone.style.borderColor=''});
    dropzone.addEventListener('drop',e=>{e.preventDefault(); fileInput.files = e.dataTransfer.files; handleFile(fileInput.files[0])});
    fileInput.addEventListener('change', ()=>handleFile(fileInput.files[0]));

    function handleFile(file){
      if(!file) return;
      uploadedFile = file;
      analyzeStatus.textContent = 'Arquivo carregado: ' + file.name;
      // preview small
      const reader = new FileReader();
      reader.onload = ()=>{
        const img = new Image(); img.src = reader.result;
        img.style.maxWidth='100%'; img.style.maxHeight='140px';
        const holder = document.getElementById('preview'); holder.innerHTML=''; holder.appendChild(img);
      }
      reader.readAsDataURL(file);
    }

    document.getElementById('analyzeBtn').addEventListener('click', async ()=>{
      if(!uploadedFile){ analyzeStatus.textContent='Nenhum arquivo. Escolha uma imagem.'; return }
      analyzeStatus.textContent='Analisando...';

      // MOCK: simple filename-based prompt + random adjectives
      await new Promise(r=>setTimeout(r,900));
      const base = uploadedFile.name.replace(/\.[^/.]+$/,"").replace(/[_-]/g,' ');
      const suggestions = ['high detail','soft lighting','anime style','dramatic pose','clean background'];
      const chosen = suggestions.sort(()=>0.5-Math.random()).slice(0,3).join(', ');
      const suggested = (base + ', ' + chosen + ' - clean, no text').replace(/\d+/g,'');
      document.getElementById('suggestedPrompt').value = suggested;
      analyzeStatus.textContent='Pronto — prompt gerado.';

      // NOTE: Para integração real, envie a imagem para um endpoint de visão/legenda:
      /*
      const fd = new FormData(); fd.append('image', uploadedFile);
      const res = await fetch('https://SEU_ENDPOINT_ANALYZE',{method:'POST', headers:{'Authorization':'Bearer SUA_CHAVE'}, body:fd});
      const data = await res.json();
      document.getElementById('suggestedPrompt').value = data.prompt;
      */
    });

    // --- Download & copy prompt ---
    document.getElementById('downloadBtn').addEventListener('click', ()=>{
      const img = preview.querySelector('img'); if(!img) return alert('Nenhuma imagem no preview');
      const a = document.createElement('a'); a.href = img.src; a.download = 'anime-art.png'; a.click();
    });
    document.getElementById('copyPromptBtn').addEventListener('click', ()=>{
      const p = document.getElementById('prompt').value || document.getElementById('suggestedPrompt').value;
      if(!p) return alert('Nenhum prompt para copiar'); navigator.clipboard.writeText(p).then(()=>alert('Prompt copiado!'))
    });

    // --- small accessibility ---
    document.addEventListener('keydown', e=>{ if(e.key==='/' && document.activeElement.tagName!=='TEXTAREA'){ e.preventDefault(); document.getElementById('prompt').focus() } });

  </script>
</body>
</html>
